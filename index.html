<!doctype html>
<html lang=es>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>FactuSmart</title>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js></script>
<style>body{font-family:Arial,sans-serif;background-color:#f0e6d2;padding:20px}.main-wrapper{display:flex;gap:20px;flex-wrap:wrap;justify-content:center}.form-container{flex:none;width:850px;background-color:#fffaf0;padding:18px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,.1);border:1px solid tan}h1{text-align:center;color:#8b5e3c}label{display:block;margin:9px 0 5px;color:#5e3c2b}input[type=email],input[type=number],input[type=text],select{width:100%;padding:10px;margin:10px 0 15px 0;border:1px solid tan;border-radius:5px;background-color:#fff8e1;color:#333;transition:background-color .3s ease;box-sizing:border-box}input:focus{background-color:#fff8e1;outline:0}.inline-group{display:flex;gap:10px;margin-bottom:15px}.inline-group>div{flex:1}button{width:100%;padding:9px;background-color:#c2a477;color:#fff;border:none;border-radius:5px;font-size:15.5px;cursor:pointer;margin-top:10px}.producto-item{margin-bottom:10px}.total-visual{margin-top:10px;font-weight:400;text-align:right;color:#5e3c2b}.resultado{flex:none;width:450px;background-color:#fdf5e6;border-left:5px solid #c2a477;padding:15px;border-radius:10px;box-shadow:0 0 5px rgba(0,0,0,.1);font-size:14px;overflow-wrap:break-word;position:relative}.detalle-lista{margin:10px 0;padding:10px;background-color:#f9f2e7;border:1px dashed tan}.detalle-lista ul{margin:0;padding-left:0;list-style:none}.detalle-item{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;font-size:15.2px}.detalle-item span:last-child{font-size:14.9px}.icono-eliminar{background:0 0;border:none;color:#8b0000;font-size:14px;cursor:pointer;margin-left:10px}#guardarPDF{display:none;margin-top:15px;background-color:#8b5e3c}.total-visual{margin-top:12px;padding:10px;background-color:#fff8e1;border:1px solid tan;border-radius:8px;color:#5e3c2b;font-size:13.7px;text-align:right;box-shadow:0 0 6px rgba(0,0,0,.05)}.total-visual div{margin-bottom:4px}#infoAdicional{margin-top:1px}.info-inline{display:flex;gap:10px;flex-wrap:wrap}.info-inline>div{flex:1;min-width:200px}.info-inline label{display:block;margin-bottom:2px;color:#5e3c2b}.info-inline input{width:100%;padding:10px;border:1px solid tan;border-radius:5px;background-color:#fff8e1;color:#333}@media (max-width:768px){.main-wrapper{flex-direction:column;align-items:center;padding:1px}.form-container{width:100%;max-width:500px;padding:20px;box-sizing:border-box}.resultado{width:100%;max-width:500px;padding:20px;box-sizing:border-box}.inline-group{flex-direction:column}.info-inline{flex-direction:column}button{font-size:16px;padding:12px}input[type=email],input[type=number],input[type=text],select{font-size:16px}.total-visual{font-size:14px}}</style>
</head>
<body>
<div class=main-wrapper>
<div class=form-container>
<h1>FactuSmart</h1>
<form id=facturaForm>
<div class=inline-group>
<div>
<label for=nombre>Nombre del cliente:</label>
<input id=nombre required>
</div>
<div>
<label for=apellido>Apellido del cliente:</label>
<input id=apellido required>
</div>
</div>
<div class=producto-item>
<label>Seleccionar producto o servicio:</label>
<select id=productoSelect>
<option value="">Seleccione un producto</option>
</select>
<input type=number id=productoPrecio placeholder=Precio style=display:none>
<input id=productoNombre placeholder="Nombre del producto" style=display:none>
<button type=button onclick=agregarProducto()>Agregar Producto o Servicio</button>
</div>
<div class=detalle-lista>
<strong>Productos agregados:</strong>
<ul id=listaVisualProductos></ul>
</div>
<div class=total-visual id=totalVisual>Subtotal: $0 COP | IVA (19%): $0 COP | Total: $0 COP</div>
<div id=infoAdicional style=display:none>
<h3>Datos para facturaci√≥n electr√≥nica</h3>
<div class=info-inline>
<div>
<label for=telefono>Tel√©fono del cliente:</label>
<input id=telefono>
</div>
<div>
<label for=correo>Correo electr√≥nico del cliente:</label>
<input type=email id=correo>
</div>
</div>
</div>
<button type=submit>Generar Factura</button>
</form>
</div>
<div class=resultado id=resultado>
<button id=guardarPDF>Guardar PDF</button>
</div>
</div>
<script>document.addEventListener("DOMContentLoaded",(function(){const t={"Reparaci√≥n de pantalla":12e4,"Cambio de bater√≠a":85e3,"Protector de vidrio":25e3,"Cargador original":6e4,"Cable USB tipo C":3e4,"Aud√≠fonos Bluetooth":9e4,"Estuche antigolpes":4e4,"Limpieza interna":5e4,"Formateo y actualizaci√≥n":7e4,"Cambio de puerto de carga":95e3,"Xiaomi Redmi A2":38e4,"Xiaomi Redmi 9A":42e4,"Xiaomi Redmi Note 12":75e4,"Xiaomi Poco M5":72e4,"Xiaomi 13 Lite":18e5,"Xiaomi 13 Pro":32e5,"Samsung Galaxy A14":78e4,"Samsung Galaxy M13":65e4,"Motorola G22":6e5,"Motorola Edge 30":145e4,"iPhone 11 64GB":21e5,"iPhone 14 Pro 128GB":46e5},e=document.getElementById("listaVisualProductos"),o=document.getElementById("totalVisual"),n=document.getElementById("productoSelect"),a=document.getElementById("productoPrecio"),r=document.getElementById("productoNombre"),l=[];let i=null,c=1;for(let e in t){const o=document.createElement("option");o.value=e,o.textContent=`${e} - $${t[e].toLocaleString()} COP`,n.appendChild(o)}const s=document.createElement("option");function d(){e.innerHTML="";let t=0;l.forEach(((o,n)=>{const a=document.createElement("li");a.className="detalle-item",a.innerHTML=`\n            <span>\n              <span style="color:#8b5e3c">${o.nombre}</span>\n              <span style="float:right; color:#444;">$${o.precio.toLocaleString()} COP</span>\n            </span>\n            <button class="icono-eliminar" onclick="eliminarProducto(${n})">üóëÔ∏è</button>\n            <hr style="border: 0; border-top: 1px dashed #d2b48c; margin: 6px 0;">\n          `,e.appendChild(a),t+=o.precio}));const n=.19*t,a=t+n;o.innerHTML=`\n          <div><strong>Subtotal:</strong> $${t.toLocaleString()} COP</div>\n          <div><strong>IVA (19%):</strong> $${n.toLocaleString()} COP</div>\n          <div><strong>Total:</strong> $${a.toLocaleString()} COP</div>`;const r=document.getElementById("infoAdicional");a>212e3?(r.style.display="block",document.getElementById("telefono").required=!0,document.getElementById("correo").required=!0):(r.style.display="none",document.getElementById("telefono").required=!1,document.getElementById("correo").required=!1)}function u(){if(!i)return;const{jsPDF:t}=window.jspdf,e=new t;let o=30;e.setFontSize(22),e.setTextColor(91,60,28),e.setFont("helvetica","bold"),e.text("FactuSmart",105,15,{align:"center"}),e.setDrawColor(160,120,80),e.line(10,18,200,18),o+=10,e.setFontSize(14),e.setTextColor(0,0,0),e.setFont("helvetica","bold"),e.text("Factura Electr√≥nica",10,o),o+=10,e.setFontSize(11),e.setFont("helvetica","bold"),e.text("Cliente:",10,o),e.setFont("helvetica","normal"),e.text(`${i.nombre} ${i.apellido}`,40,o),o+=8,e.setFont("helvetica","bold"),e.text("Fecha:",10,o),e.setFont("helvetica","normal"),e.text(`${i.fecha} ${i.hora}`,40,o),o+=8,e.setFont("helvetica","bold"),e.text("Factura N¬∞:",10,o),e.setFont("helvetica","normal"),e.text(`${i.facturaNumero}`,40,o),o+=8,e.setFont("helvetica","bold"),e.text("Tel√©fono:",10,o),e.setFont("helvetica","normal"),e.text(`${i.telefono}`,40,o),o+=8,e.setFont("helvetica","bold"),e.text("Correo:",10,o),e.setFont("helvetica","normal"),e.text(`${i.correo}`,40,o),o+=12,e.setFont("helvetica","bold"),e.setTextColor(80,60,40),e.text("Productos/Servicios:",10,o),o+=8,e.setFontSize(11),e.setTextColor(40,40,40),i.detalle.split("\n").forEach((t=>{if(t.trim()){const[n,a]=t.split(":"),r=n.replace("‚Ä¢","").trim(),l=a?.trim()||"";e.setFont("helvetica","normal"),e.text(`‚Ä¢ ${r}`,53,o),e.setFont("helvetica","normal"),e.text(l,200,o,{align:"right"}),o+=6,e.setDrawColor(220),e.line(10,o,200,o),o+=4}})),o+=4,e.setDrawColor(160,120,80),e.line(10,o,200,o),o+=6,e.setFont("helvetica","bold"),e.setFontSize(11),e.setTextColor(60,60,60),e.text(`Subtotal: $${i.subtotal.toLocaleString()}`,200,o,{align:"right"}),o+=7,e.text(`IVA (19%): $${i.iva.toLocaleString()}`,200,o,{align:"right"}),o+=7,e.setTextColor(0,102,51),e.setFontSize(14),e.text(`TOTAL: $${i.totalFactura.toLocaleString()}`,200,o,{align:"right"}),o+=10,e.setFont("helvetica","italic"),e.setFontSize(10),e.setTextColor(120,120,120),i.totalFactura>212e3?e.text("Esta es una factura electr√≥nica v√°lida para la DIAN.",10,o):e.text("Esta es una tirilla v√°lida solo para ventas menores a $212.000 COP.",10,o),o+=12,e.setFontSize(9),e.setTextColor(100,100,100),e.text("Gracias por su compra. Para soporte: contacto@factusmart.com",10,o),e.save("factura.pdf")}s.value="otro",s.textContent="Producto personalizado",n.appendChild(s),n.addEventListener("change",(()=>{"otro"===n.value?(r.style.display="block",a.style.display="block",r.value="",a.value=""):(r.style.display="none",a.style.display="none",r.value=n.value,a.value=t[n.value])})),window.eliminarProducto=function(t){l.splice(t,1),d()},window.agregarProducto=function(){const t=r.value||n.value,e=parseFloat(a.value);!t||isNaN(e)||e<=0?alert("Por favor completa nombre y precio del producto."):(l.push({nombre:t,precio:e}),n.value="",r.value="",a.value="",r.style.display="none",a.style.display="none",d())},document.getElementById("facturaForm").addEventListener("submit",(function(t){t.preventDefault();const e=document.getElementById("nombre").value,o=document.getElementById("apellido").value,n=document.getElementById("telefono").value,a=document.getElementById("correo").value;let r="",s=0;l.forEach((t=>{r+=`‚Ä¢ ${t.nombre}: $${t.precio.toLocaleString()} COP\n`,s+=t.precio}));const d=.19*s,g=s+d,m=new Date,p=m.toLocaleDateString(),b=m.toLocaleTimeString();var v;i={nombre:e,apellido:o,telefono:n,correo:a,detalle:r,subtotal:s,iva:d,totalFactura:g,fecha:p,hora:b,facturaNumero:(v=c,v.toString().padStart(3,"0"))},c++;let $="";g>212e3?($=`\n            <strong>Factura Electr√≥nica</strong><br><br>\n            <strong>Cliente:</strong> ${e} ${o}<br>\n            <strong>Fecha:</strong> ${p} ${b}<br>\n            <strong>Factura N¬∞:</strong> ${i.facturaNumero}<br><br>\n            <strong>Productos/Servicios:</strong><br>${r.replace(/\n/g,"<br>")}\n            <strong>Subtotal:</strong> $${s.toLocaleString()} COP<br>\n            <strong>IVA (19%):</strong> $${d.toLocaleString()} COP<br>\n            <strong>Total:</strong> $${g.toLocaleString()} COP<br><br>\n            <strong>Tel√©fono:</strong> ${n}<br>\n            <strong>Correo:</strong> ${a}<br><br>\n            <i>Esta es una factura electr√≥nica v√°lida para la DIAN.</i>\n          `,document.getElementById("guardarPDF").style.display="block"):($=` \n            <strong>Factura POS</strong><br><br>\n            <strong>Cliente:</strong> ${e} ${o}<br>\n            <strong>Fecha:</strong> ${p} ${b}<br>\n            <strong>Factura N¬∞:</strong> ${i.facturaNumero}<br><br>\n            <strong>Productos/Servicios:</strong><br>${r.replace(/\n/g,"<br>")}\n            <strong>Subtotal:</strong> $${s.toLocaleString()} COP<br>\n            <strong>IVA (19%):</strong> $${d.toLocaleString()} COP<br>\n            <strong>Total:</strong> $${g.toLocaleString()} COP<br><br>\n            <i>Esta es una tirilla POS, v√°lida solo para ventas menores a $212.000 COP.</i>\n          `,document.getElementById("guardarPDF").style.display="none"),document.getElementById("resultado").innerHTML=$+document.getElementById("guardarPDF").outerHTML,document.getElementById("guardarPDF").onclick=u,alert("Factura generada con √©xito.")}))}))</script>
</body>
</html>
